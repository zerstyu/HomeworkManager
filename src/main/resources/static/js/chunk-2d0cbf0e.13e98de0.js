(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cbf0e"],{"4c8a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12 col-lg-12"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"제출 정보",type:"gradient-red","sub-title":t.subjectName+" > "+t.noticeTitle}},[a("template",{slot:"footer"},[a("span",{staticClass:"text-info mr-2"},[t._v("선생님 정보 ")]),a("span",{staticClass:"text-nowrap"},[t._v("추대윤")])])],2)],1)]),a("br"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12 col-lg-12"},[a("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"제출자",type:"gradient-red","sub-title":t.userName}},[a("template",{slot:"footer"},[a("span",{staticClass:"text-nowrap"},[t._v("안랩")])])],2)],1)])]),a("div",{staticClass:"container-fluid mt--7"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card shadow"},[t._m(0),a("div",{staticClass:"card-body"},[null==t.feedback?a("div",{staticClass:"row icon-examples"},[a("div",{staticClass:"col-md-12"},[t._m(1),a("br"),t._m(2),a("p",{domProps:{innerHTML:t._s(t.note)}}),a("br"),a("br"),a("base-button",{attrs:{type:"default",icon:"ni ni-bag-17"},on:{click:function(e){t.modals3=!0}}},[t._v("학생제출원본 확인")])],1)]):t._e(),null!=t.feedback?a("div",{staticClass:"row icon-examples"},[a("div",{staticClass:"col-md-12"},[t._m(3),t._l(t.paginationTotal,(function(e){return a("div",{key:e},[a("iframe",{staticStyle:{display:"none",width:"100%",height:"870px","margin-top":"-50px"},attrs:{id:"homeworkCanvasIframe",name:"homeworkCanvasIframe",scrolling:"no",src:"canvas_resource/canvas.html"},on:{load:function(e){return t.canvasOnLoad()}}})])}))],2),a("div",[a("base-pagination",{attrs:{align:"center","page-count":t.paginationTotal},model:{value:t.paginationDefault,callback:function(e){t.paginationDefault=e},expression:"paginationDefault"}}),a("br"),a("br")],1),a("br"),a("br"),a("br"),a("br"),a("form",{staticStyle:{width:"100%"}},[a("div",{staticClass:"col-md-12"},[t._m(4),a("p",{domProps:{innerHTML:t._s(t.feedback)}})]),a("br"),a("br"),a("div",{staticClass:"col-md-3"},[t._m(5),a("span",{staticClass:"text-nowrap"},[t._v("※ 이 과제의 최대 점수는 100점 입니다.")]),a("h3",[t._v(t._s(t.score)+"점")])]),a("br"),a("br"),a("hr"),a("br"),a("br"),a("div",{staticClass:"col-md-12"},[t._m(6),a("p",{domProps:{innerHTML:t._s(t.note)}})]),a("br"),a("br"),a("div",{staticClass:"col-md-12"},[a("base-button",{attrs:{type:"default",icon:"ni ni-bag-17"},on:{click:function(e){t.modals3=!0}}},[t._v("학생제출원본 확인")]),a("base-button",{attrs:{type:"warning",icon:"ni ni-bag-17"},on:{click:function(e){t.modals5=!0}}},[t._v("제출과제 수정")])],1),a("br"),a("br")])]):t._e()])])])])]),a("br"),a("br"),a("br"),a("modal",{attrs:{show:t.modals},on:{"update:show":function(e){t.modals=e}}},[a("template",{slot:"header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("알림")])]),a("div",[t._v(" "+t._s(t.responseMsg)+" ")]),a("template",{slot:"footer"},[a("base-button",{attrs:{type:"secondary"},on:{click:function(e){t.modals=!1}}},[t._v("확인")])],1)],2),a("modal",{attrs:{show:t.modals2},on:{"update:show":function(e){t.modals2=e}}},[a("template",{slot:"header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel2"}},[t._v("과제방 만들기")])]),a("div",[a("base-input",{attrs:{placeholder:"과제명을 입력해주세요"},model:{value:t.createSubjectName,callback:function(e){t.createSubjectName=e},expression:"createSubjectName"}})],1),a("template",{slot:"footer"},[a("base-button",{attrs:{type:"primary"}},[t._v("과제방 생성")]),a("base-button",{attrs:{type:"default"},on:{click:function(e){t.modals2=!1}}},[t._v("취소")])],1)],2),a("modal",{attrs:{show:t.modals3},on:{"update:show":function(e){t.modals3=e}}},[a("template",{slot:"header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel3"}},[t._v("과제 원본")])]),t._l(t.assignmentFileList,(function(t){return a("div",{key:t.id},[a("img",{staticStyle:{"max-width":"400px"},attrs:{src:t.fileString}}),a("br")])})),a("template",{slot:"footer"},[a("base-button",{attrs:{type:"secondary"},on:{click:function(e){t.modals3=!1}}},[t._v("확인")])],1)],2),a("modal",{attrs:{show:t.modals5},on:{"update:show":function(e){t.modals5=e}}},[a("template",{slot:"header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel5"}},[t._v("과제 제출 수정")])]),a("div",[a("h4",[t._v("과제 노트")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.createAssignNote,expression:"createAssignNote"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea111",rows:"3",placeholder:"완료한 과제에 대해 설명하세요"},domProps:{value:t.createAssignNote},on:{input:function(e){e.target.composing||(t.createAssignNote=e.target.value)}}}),a("br"),a("h4",[t._v("과제자료 첨부")]),a("base-button",{attrs:{size:"sm",type:"primary"},on:{click:function(e){return t.createAssignFileMinus()}}},[t._v("-")]),t._v(" "+t._s(t.notiEditFileLen)+" "),a("base-button",{attrs:{size:"sm",type:"primary"},on:{click:function(e){return t.createAssignFilePlus()}}},[t._v("+")]),a("br"),t._l(t.createAssignmentFileLen,(function(e){return a("div",{key:e},[a("input",{attrs:{type:"file",id:"files2",name:"createAssignFileInput"},on:{change:function(a){return t.getBase64_assign(e)}}})])})),a("br"),a("h4",[t._v("과제 유형")]),a("base-radio",{staticClass:"mb-5",attrs:{name:"OPEN"},model:{value:t.createAssignIsOpen,callback:function(e){t.createAssignIsOpen=e},expression:"createAssignIsOpen"}},[t._v(" 오픈과제 ")]),a("base-radio",{staticClass:"mb-5",attrs:{name:"PRIVATE"},model:{value:t.createAssignIsOpen,callback:function(e){t.createAssignIsOpen=e},expression:"createAssignIsOpen"}},[t._v(" 프라이빗과제 ")])],2),a("template",{slot:"footer"},[a("base-button",{attrs:{type:"primary"},on:{click:function(e){return t.homeworkSubmit()}}},[t._v("과제 제출")]),a("base-button",{attrs:{type:"default"},on:{click:function(e){t.modals5=!1}}},[t._v("취소")])],1)],2)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header bg-transparent"},[a("h3",{staticClass:"mb-0"},[t._v("채점결과")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",[a("i",{staticClass:"ni ni-ruler-pencil"}),t._v(" 채점이 진행중 입니다.")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",[a("i",{staticClass:"ni ni-chat-round"}),t._v(" 학생 노트")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",[a("i",{staticClass:"ni ni-ruler-pencil"}),t._v(" 채점 결과")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",[a("i",{staticClass:"ni ni-chat-round"}),t._v(" 선생님의 피드백")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",[a("i",{staticClass:"ni ni-paper-diploma"}),t._v(" 점수")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",[a("i",{staticClass:"ni ni-chat-round"}),t._v(" 학생 노트")])}],i=(a("ac1f"),a("5319"),a("2b0e")),o=a("4eb5"),r=a.n(o),l=a("b458"),c=a("bc3a");i["a"].use(r.a);var d={directives:{"b-tooltip":l["default"]},data:function(){return{homeworkCanvasData:[],icons:[{name:"ni ni-air-baloon"}],paginationTotal:5,paginationDefault:1,isAssignMaster:"",assignmentFileList:[],assignmentId:"",feedback:"",isOpen:!1,note:"",score:"",userName:"",userId:"",subjectId:"",subjectName:"",noticeId:"",noticeTitle:"",createAssignIsOpen:"OPEN",createAssignNote:"",createAssignScore:0,createAssignmentFileDtoList:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],createAssignmentFileLen:1,responseMsg:"",modals:!1,modals2:!1,modals3:!1,modals4:!1,modals5:!1}},watch:{paginationDefault:function(t){console.log("watch "+t),this.movePage(t)}},mounted:function(){this.getAssignment(),this.homeworkCanvasData.push({id:1,page:1,bgImg:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/7QAkUGhvdG9za"})},methods:{homeworkSubmit:function(){this.modals5=!1;var t=this,e=!1;"OPEN"==this.createAssignIsOpen&&(e=!0);var a={headers:{"Content-Type":"application/json"}};c.put("/api/assignments/"+this.$route.params.assignId,'{"note": "'+t.createAssignNote.replace(/(?:\r\n|\r|\n)/g,"<br/>")+'","isOpen": "'+e+'","noticeId": "'+t.noticeId+'","score": "0","subjectId": "'+t.subjectId+'","userId": "'+localStorage.getItem("userId")+'"}',a).then((function(e){"OK"==e.data.statusCode?t.homeworkFileSubmit(e.data.data.id):(t.modals=!0,t.responseMsg=e.data.message)}))},homeworkFileSubmit:function(t){for(var e=this,a="",s=!1,n=1;n<=this.createAssignmentFileLen;n++)s=!0,a+='{ "assignmentId" : "'+t+'",',a+='  "fileString" : "'+this.createAssignmentFileDtoList[n]+'",',a+='  "type" : "ORIGINAL",',a+='  "userId" : "'+localStorage.getItem("userId")+'"},';1==s&&(a=a.substr(0,a.length-1));var i={headers:{"Content-Type":"application/json"}};c.put("/api/assignment_files/"+t,"["+a+"]",i).then((function(t){"OK"==t.data.statusCode?(e.modals=!0,e.responseMsg="성공하였습니다.",e.getAssignments()):(e.modals=!0,e.responseMsg=t.data.message)}))},getBase64_assign:function(t){console.log("base64_1 변환 요청 idx : "+t);var e=document.getElementsByName("createAssignFileInput")[t-1].files[0],a=t,s=this,n=new FileReader;n.readAsDataURL(e),n.onload=function(){console.log("success!! base64_assign : "+n.result),s.createAssignmentFileDtoList[a]=n.result},n.onerror=function(t){console.log("base 64 Error.... : ",t)}},getAssignment:function(){var t=this;if(""==localStorage.getItem("userId")||null==localStorage.getItem("userId"))return this.responseMsg="로그인이 필요한 서비스 입니다. 로그인 후 다시 시도해 주세요!",void(this.modals=!0);c.get("/api/assignments/"+this.$route.params.assignId).then((function(e){"OK"==e.data.statusCode?(t.assignmentFileList=e.data.data.assignmentFileList,t.assignmentId=e.data.data.assignmentId,t.feedback=e.data.data.feedback,t.isOpen=e.data.data.isOpen,t.note=e.data.data.note,t.score=e.data.data.score,t.userId=e.data.data.userId,t.subjectId=e.data.data.subjectId,t.subjectName=e.data.data.subjectName,t.noticeId=e.data.data.noticeId,t.noticeTitle=e.data.data.noticeTitle,t.assignmentId==localStorage.getItem("userId")&&(t.isAssignMaster=!0),t.paginationTotal=e.data.data.assignmentFileList.length,t.paginationTotal>0&&t.movePage(1),t.canvasOnLoad()):(t.modals=!0,t.responseMsg=e.data.message)}))},sendCanvas:function(t,e){var a=document.getElementsByName("homeworkCanvasIframe")[e],s=a.contentWindow.loadData(t);console.log("응답입니다 "+s)},getHistoryData:function(t){var e=document.getElementsByName("homeworkCanvasIframe")[t],a=e.contentWindow.getHistoryData();return this.assignmentFileList[t].historyFileString=a,console.log("히스토리 내역입니다"+a),a},canvasOnLoad:function(){for(var t=0;t<this.paginationTotal;t++)this.sendCanvas(this.assignmentFileList[t],t)},movePage:function(t){console.log("movePage : "+t);for(var e=document.getElementsByName("homeworkCanvasIframe"),a=0;a<this.paginationTotal;a++)e[a].style.display=a==t-1?"block":"none"}}},m=d,u=a("2877"),p=Object(u["a"])(m,s,n,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0cbf0e.13e98de0.js.map