(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b9de2"],{"357a":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",attrs:{type:"gradient-success"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12"},[e("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"과제 제목",type:"gradient-red","sub-title":t.subjectName+" > "+t.noticeTitle,icon:"ni ni-air-baloon"}},[e("template",{slot:"footer"})],2)],1)]),e("br"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 col-lg-12"},[e("stats-card",{staticClass:"mb-4 mb-xl-0",attrs:{title:"제출자",type:"gradient-red","sub-title":t.userName,icon:"ni ni-circle-08"}},[e("template",{slot:"footer"})],2)],1)])]),e("div",{staticClass:"container-fluid mt--7"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"card shadow"},[t._m(0),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row icon-examples"},[e("div",{staticClass:"col-md-12"},[t._m(1),t._l(t.paginationTotal,(function(a){return e("div",{key:a},[e("iframe",{staticStyle:{display:"none",width:"100%",height:"870px","margin-top":"-50px"},attrs:{id:"homeworkCanvasIframe",name:"homeworkCanvasIframe",scrolling:"no",src:"canvas_resource/canvas.html"},on:{load:function(a){return t.canvasOnLoad()}}})])}))],2),e("div",[e("base-pagination",{attrs:{align:"center","page-count":t.paginationTotal},model:{value:t.paginationDefault,callback:function(a){t.paginationDefault=a},expression:"paginationDefault"}}),e("br"),e("br"),e("base-button",{attrs:{type:"info",icon:"ni ni-bag-17"},on:{click:function(a){return t.getHistoryData(0)}}},[t._v("으아2")])],1),e("br"),e("br"),e("br"),e("br"),e("form",{staticStyle:{width:"100%"}},[e("div",{staticClass:"col-md-12"},[t._m(2),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.feedback,expression:"feedback"}],staticClass:"form-control",staticStyle:{width:"100%"},attrs:{rows:"3",placeholder:"피드백을 남겨주세요."},domProps:{value:t.feedback},on:{input:function(a){a.target.composing||(t.feedback=a.target.value)}}})]),e("br"),e("br"),e("div",{staticClass:"col-md-3"},[t._m(3),e("span",{staticClass:"text-nowrap"},[t._v("※ 이 과제의 최대 점수는 100점 입니다.")]),e("br"),e("br"),e("base-input",{attrs:{placeholder:"점수"},model:{value:t.score,callback:function(a){t.score=a},expression:"score"}})],1),e("br"),e("br"),e("div",{staticClass:"col-md-3"},[e("base-button",{attrs:{type:"primary",icon:"ni ni-bag-17"},on:{click:function(a){return t.homeworkSubmit()}}},[t._v("평가 제출")])],1)]),e("br"),t._l(t.icons,(function(a,s){return e("div",{key:a.name+s,staticClass:"col-lg-3 col-md-6"},[e("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn-icon-clipboard",attrs:{type:"button",title:a.name,"data-clipboard-text":"air-baloon"},on:{click:function(a){return t.sendCanvas(t.homeworkCanvasData[0])}}},[e("div",[e("i",{class:a.name}),e("span",[t._v("불러오기")])])])])}))],2)])])])])]),e("modal",{attrs:{show:t.modals},on:{"update:show":function(a){t.modals=a}}},[e("template",{slot:"header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("알림")])]),e("div",[t._v(" "+t._s(t.responseMsg)+" ")]),e("template",{slot:"footer"},[e("base-button",{attrs:{type:"secondary"},on:{click:function(a){t.modals=!1}}},[t._v("확인")])],1)],2)],1)},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header bg-transparent"},[e("h3",{staticClass:"mb-0"},[t._v("채점하기")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h2",[e("i",{staticClass:"ni ni-ruler-pencil"}),t._v(" 채점")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h2",[e("i",{staticClass:"ni ni-chat-round"}),t._v(" 피드백")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h2",[e("i",{staticClass:"ni ni-paper-diploma"}),t._v(" 평가")])}],i=(e("ac1f"),e("5319"),e("2b0e")),o=e("4eb5"),r=e.n(o),l=e("b458"),c=e("bc3a");i["a"].use(r.a);var d={directives:{"b-tooltip":l["default"]},data:function(){return{homeworkCanvasData:[],icons:[{name:"ni ni-air-baloon"}],paginationDefault:1,paginationTotal:5,isAssignMaster:"",assignmentFileList:[],assignmentId:"",feedback:"",isOpen:!1,note:"",score:"",userName:"",userId:"",subjectId:"",subjectName:"",noticeId:"",noticeTitle:"",modals:!1,modals1:!1,modals2:!1,modals3:!1,modals4:!1,responseMsg:""}},watch:{paginationDefault:function(t){console.log("watch "+t),this.movePage(t)}},created:function(){this.getAssignment()},mounted:function(){this.homeworkCanvasData.push({assignmentFileId:1,type:"ORIGINAL",fileString:"",historyFileString:""})},methods:{movePage:function(t){console.log("movePage : "+t);for(var a=document.getElementsByName("homeworkCanvasIframe"),e=0;e<this.paginationTotal;e++)a[e].style.display=e==t-1?"block":"none"},getAssignment:function(){var t=this;if(""==localStorage.getItem("userId")||null==localStorage.getItem("userId"))return this.responseMsg="로그인이 필요한 서비스 입니다. 로그인 후 다시 시도해 주세요!",void(this.modals=!0);c.get("/api/assignments/"+this.$route.params.assignId).then((function(a){"OK"==a.data.statusCode?(t.assignmentFileList=a.data.data.assignmentFileList,t.assignmentId=a.data.data.assignmentId,t.feedback=a.data.data.feedback,t.isOpen=a.data.data.isOpen,t.note=a.data.data.note,t.score=a.data.data.score,t.userId=a.data.data.userId,t.subjectId=a.data.data.subjectId,t.subjectName=a.data.data.subjectName,t.noticeId=a.data.data.noticeId,t.noticeTitle=a.data.data.noticeTitle,t.assignmentId==localStorage.getItem("userId")&&(t.isAssignMaster=!0),t.paginationTotal=a.data.data.assignmentFileList.length,t.paginationTotal>0&&t.movePage(1),t.canvasOnLoad()):(t.modals=!0,t.responseMsg=a.data.message)}))},onCopy:function(){this.$notify({type:"success",title:"Copied to clipboard"})},sendCanvas:function(t,a){var e=document.getElementsByName("homeworkCanvasIframe")[a],s=e.contentWindow.loadData(t);console.log("응답입니다 "+s)},getHistoryData:function(t){var a=document.getElementsByName("homeworkCanvasIframe")[t],e=a.contentWindow.getHistoryData();return this.assignmentFileList[t].historyFileString=e,console.log("히스토리 내역입니다"+e),e},canvasOnLoad:function(){for(var t=0;t<this.paginationTotal;t++)this.sendCanvas(this.assignmentFileList[t],t)},homeworkSubmit:function(){var t=this,a={headers:{"Content-Type":"application/json"}};c.put("/api/assignments/"+this.$route.params.assignId,'{"feedback": "'+t.feedback.replace(/(?:\r\n|\r|\n)/g,"<br/>")+'","noticeId": "'+t.noticeId+'","score": "'+t.score+'","subjectId": "'+t.subjectId+'","userId": "'+t.userId+'"}',a).then((function(a){"OK"==a.data.statusCode?t.homeworkFileSubmit(a.data.data.id):(t.modals=!0,t.responseMsg=a.data.message)}))},homeworkFileSubmit:function(t){for(var a=this,e="",s=!1,n=0;n<this.assignmentFileList.length;n++)s=!0,e+='{ "assignmentId" : "'+t+'",',e+=' "assignmentFileId" : "'+this.assignmentFileList[n].assignmentFileId+'",',e+='  "historyFileString" : "'+this.getHistoryData(n)+'",',e+='  "type" : "ORIGINAL",',e+='  "userId" : "'+a.userId+'"},';1==s&&(e=e.substr(0,e.length-1));var i={headers:{"Content-Type":"application/json"}};c.put("/api/assignment_files/","["+e+"]",i).then((function(t){"OK"==t.data.statusCode?(a.modals=!0,a.responseMsg="성공하였습니다."):(a.modals=!0,a.responseMsg=t.data.message)}))}}},m=d,u=e("2877"),p=Object(u["a"])(m,s,n,!1,null,null,null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0b9de2.c8efd56c.js.map